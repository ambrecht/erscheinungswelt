import React, { useEffect, useRef, useState, useCallback } from 'react';
import gsap from 'gsap';
import styled from 'styled-components';

// Funktion zur Zufallsgenerierung von Koordinaten
const getRandom = (min, max) => Math.random() * (max - min) + min;

/**
 * Eine radikale, wiederverwendbare, ultrafunktionale React-Komponente fÃ¼r SVG-Animationen.
 *
 * @component
 */
const RadicalSVGAnimator = () => {
  const svgRef = useRef(null);
  const [elementIds, setElementIds] = useState([]);

  const extractSVGIds = useCallback(() => {
    if (!svgRef.current) return;
    const ids = Array.from(svgRef.current.querySelectorAll('[class]')).map(
      (element) => element.id,
    );
    setElementIds(ids);
  }, []);

  const animateSVG = useCallback(() => {
    if (elementIds.length === 0) return;
    gsap.set(`#${elementIds.join(', #')}`, { x: 0, y: 0 });

    elementIds.forEach((id) => {
      const randomX = getRandom(-20000, 20000);
      const randomY = getRandom(-20000, 20000);

      gsap.fromTo(
        `#${id}`,
        { x: randomX, y: randomY },
        { x: 0, y: 0, duration: 5, ease: 'power2.inOut' },
      );
      gsap.to(`#${id}`, {
        x: randomX,
        y: randomY,
        duration: 20,
        delay: 10,
        ease: 'power2.inOut',
      });
    });
  }, [elementIds]);

  useEffect(() => {
    extractSVGIds();
  }, [extractSVGIds]);

  useEffect(() => {
    if (elementIds.length > 0) {
      animateSVG();
    }
  }, [elementIds, animateSVG]);

  const StyledSVG = styled.svg`
    mix-blend-mode: difference;
    opacity: 95%;
    width: 100vw;
    height: 100vh;
    .st0 {
      fill: white;
    }
  `;

  return (
    <StyledSVG ref={svgRef}>
      <g id="In_Der">
        <path
          class="st0"
          d="M333.873 324H271v44h89.684zm162.736 42.708c1.635.071 3.361.05 5.086.029l22.159-.27c6.357-.077 12.438-.424 16.269-6.556 3.296-5.308 3.388-12.666 3.37-14.119l-.303-24.883-64.115.781.279 22.885c.075 6.175-.028 12.625 4.572 17.383 2.392 2.514 5.594 4.382 12.683 4.75zm34.452-27.486.051 4.177c.051 4.178-1.393 4.922-5.571 4.973l-28.878.352c-3.724.045-5.276-.662-5.327-4.839l-.051-4.177 39.776-.486zM440 324h-57.782l.19 44H440zm-263 0h69v44h-69z"
          id="Top"
        />
        <path
          class="st0"
          d="M440 457v-46h-92.703l27.669 46zm-169-46h57v46h-57zm231.76 28.202-12.896.157c-5.176.063-6.711.808-9.328 2.293l.221 18.163c1.799-1.476 2.787-2.396 6.964-2.447l13.531-.164c3.724-.046 7.448 0 10.042-3.302 2.327-2.844 2.638-7.117 2.719-7.935.096.453.384 1.721.855 3.077.844 2.17 2.041 3.518 2.685 4.146 3.218 3.23 7.036 3.456 11.213 3.405 3.905-.047 7.896-.459 10.952-3.131 4.403-3.868 4.585-11.318 4.664-12.318.232-3.272.193-6.542.152-9.901l-.239-19.616-64.115.781.223 18.254 26.608-.324.056 4.631c.042 3.36-1.129 4.192-4.307 4.231zm29.044-9.165.059 4.813c.037 2.997-1.04 4.101-3.946 4.136l-3.632.044c-4.087.05-5.005-.757-5.047-4.208l-.056-4.631 12.622-.154zM177 411h69v46h-69z"
          id="BOT"
        />
        <path
          class="st0"
          d="M328 409v-30.081L346.094 409H440v-39h-57.583l.146 33.906L361.903 370H271v39zm164.475-1.371-.207-16.982 14.076-.171.192 15.711 12.259-.15-.191-15.711 12.986-.158.207 16.982 12.442-.152-.427-35.054-64.115.782.428 35.053zM177 370h69v39h-69z"
          id="Mitte"
        />
      </g>
      <g id="willkommen">
        <path
          class="st0"
          d="M226.719 286h33.75l2.378-31h-39.041zm248.221 0h29.205l-8.298-31h-28.062zM431 255h27v31h-27zm-153 0h28v31h-28zm307 0h23v31h-23zm-212 0v31h52v-30h-25v-1zm-57 0v31h52v-30h-25v-1zm476 0v31h53v-31h-26zm60 0h23v31h-23zm-163 0h22v31h-22zm-33 0h23v31h-23zm70.609 31h17.495l4.26-31h-26.303zm167.229 0H920v-31h-32.456zM759 255h23v31h-23zm-248.676 12.237c4.132 11.817 14.404 20.512 32.174 20.512 9.367 0 19.851-2.898 26.876-13.823 3.633-5.513 5.269-11.972 6.01-18.926h-28.256c-1.102 1.58-2.848 2.649-5.627 2.649-2.734 0-4.47-1.076-5.576-2.649h-28.258c.471 4.208 1.274 8.321 2.657 12.237zM623.297 286h17.495l4.35-31h-26.303zm-418.757 0 2.949-31h-38.718l2.432 31z"
          id="WillkommenBODEB"
        />
        <path
          class="st0"
          d="M792 168v85h27v-32h24v-30h-24v-23zm60 0v85h23v-59.787L887.138 253H920v-85h-23.211l.08 54.313L885.684 168zm-344.917 0c-.079 3.197-.083 6.479-.083 9.829v59.308c0 5.29.008 10.638.466 15.863h27.451c-.833-2.318-.917-5.063-.917-7.167V168h-26.917zM585 253h23v-73.387L618.552 253h26.87L656 177.606V253h23v-85h-39.294l-7.455 63.9-7.625-63.9H585zm104 0h22v-73.387L721.768 253h26.872L759 177.606V253h23v-85h-38.98l-7.456 63.9-7.625-63.9H689zm-140.88 0h27.45c.42-5.106.43-10.447.43-15.863v-60.199c0-2.969.022-5.959-.025-8.938H549v77.609c0 2.221-.055 5.037-.88 7.391zM431 168v85h27v-40.389L467.323 253h27.989l-13.208-49.345L491.323 168h-26.118L458 200.348V168zm-262.386 85h39.066l8.018-84.278 7.92 84.278h39.383l6.521-85h-23.514l-4.687 71.704L234.954 168h-38.413l-6.189 71.704L185.576 168h-23.633zM373 168h27v85h-27zm-57 0h27v85h-27zm-38 0h28v85h-28z"
          id="WillkommenMITTE"
        />
        <path
          class="st0"
          d="m727.7 166-4.534-38H689v38zm-542.257 0-2.531-38h-24.107l2.982 38zM373 128h27v38h-27zm-138.224 38-3.374-38h-31.408l-3.28 38zm257.064 0 9.825-38h-27.551l-8.464 38zM431 128h27v38h-27zm-161.324 38 2.916-38h-23.97l-2.483 38zM316 128h27v38h-27zm218.026 38c.151-4.553 1.183-10.244 7.337-10.244 6.547 0 7.503 5.399 7.62 10.244h26.949c-.166-5.959-.691-11.841-2.317-17.379-6.888-24.08-31.039-22.742-32.278-22.742-12.949 0-20.406 4.683-25.089 10.034-6.963 7.905-8.681 18.351-9.105 30.087h26.883zM278 128h28v38h-28zm346.387 38-4.534-38H585v38zm260.884 0-7.826-38H852v38zM920 166v-38h-23.27l.056 38zm-138 0v-38h-34.313l-4.434 38zm37 0v-7h26v-31h-53v38zm-140 0v-38h-34.627l-4.434 38z"
          id="Top"
        />
      </g>
      <g id="Erscheinungswelt">
        <path
          class="st0"
          d="M227 698h26v53h-26zm-32 0h-26v53h51v-50h-25zm97 0h-26v15.446c0 21.032.928 27.554 3.033 37.554h26.321c-2.105-7-3.354-10.986-3.354-27.96V698zm149 0h26v53h-26zm-105.61 0c-.415 2.353-1.019 4.057-1.867 5.483-1.053 1.846-1.998 2.583-3.182 2.583-2.908 0-4.573-3.133-5.461-8.066h-26.644c.304 9.016.997 17.704 2.588 25.778 4.606 23.246 14.376 27.674 17.008 28.781 5.791 2.951 10.675 2.951 12.913 2.951 9.871 0 23.039-5.903 28.434-32.84 1.566-7.627 2.359-16.123 2.733-24.671H335.39zM479 698h26v53h-26zm-71.791 0c-.944 5.068-2.774 7.329-5.709 7.329-2.893 0-4.811-2.309-5.772-7.329H369.2c.216 7.273.655 12.604 1.541 18.398 5.396 35.792 21.072 38.006 23.836 38.743 2.501.738 4.812 1.107 7.18 1.107 15.925 0 24.479-12.177 28.69-30.257 2.004-8.531 2.877-17.885 3.258-27.992h-26.496zm312.157 0c-1.013 3.175-2.648 5.483-5.301 5.483-2.623 0-4.272-2.315-5.312-5.483h-27.606c.299 10.881 1.06 16.91 2.345 23.564 5.396 29.149 19.934 33.577 30.462 33.577 11.582 0 18.036-4.797 22.643-12.176 7.453-12.023 9.596-26.508 10.186-44.966h-27.417zm257.832 0 2.414 53h31.849l2.911-53zm-38.889 0c-.415 2.353-1.019 4.057-1.867 5.483-1.053 1.846-2.457 2.583-3.641 2.583-2.909 0-4.729-3.133-5.747-8.066h-25.833c.292 9.016.972 17.704 2.563 25.778 4.605 23.246 14.354 27.674 16.986 28.781 5.791 2.951 10.665 2.951 12.902 2.951 9.871 0 23.034-5.903 28.431-32.84 1.566-7.627 2.357-16.123 2.73-24.671h-26.524zm91.465 0 2.875 53h32.245l2.36-53zM1165 698h-25v53h50v-49h-25zm37 0h26v53h-26zm-332.252 0c-.746 9.174-3.175 12.863-7.577 12.863-4.79 0-6.383-6.439-6.911-12.863h-26.17c.096 6.018.285 10.489.657 15.077 1.053 11.808 2.94 19.557 4.125 23.246 1.842 6.643 3.642 9.594 4.694 11.439 2.236 3.32 6.307 7.748 12.624 7.748 9.344 0 14.81-9.594 18.81-32.471V751h25v-53h-25.252zM1108 698h-26v53h51v-50h-25zm-567 0h-27v53h51v-50h-24zm248.485 0 6.13 53H820v-53zm-147.956 0 6.154 53H672v-53zM572 698h26v53h-26zm36 0h22v53h-22zm148 0h22v53h-22z"
          id="Bottom"
        />
        <path
          class="st0"
          d="M672 578h-21.48l.058 69.082L642.365 578H608v118h22v-97.309L641.297 696H672zM505 696V578h-26v16h-12v-16h-26v118h26v-49h12v49zm315-118h-21.548l.059 69.082L790.298 578H756v118h22v-97.309L789.254 696H820zM292 696v-27.939c0-15.128.098-30.257-4.64-40.957-4.08-9.594-10.282-11.07-11.467-11.439.658-.368 2.492-1.476 4.466-3.32 3.159-3.321 5.129-8.118 6.05-10.701 2.624-7.15 3.911-15.096 4.542-23.643h-24.986c-.225 12.891-1.62 16-6.145 16H253v-16h-26v118h26v-53h6.821c4.87 0 6.179 5.136 6.179 18.05V696h26zm103-7.645V578h-26v98.179c0 8.185.025 14.521.148 19.821h26.258c-.271-2.147-.406-4.687-.406-7.645zM361.982 696c.161-4.434.228-8.865.228-13.18 0-33.209-3.815-46.123-8.026-57.193-2.105-5.166-4.341-10.331-6.578-15.128l-12.766-26.937c-.96-2.04-1.865-3.872-2.711-5.563h-31.752c.886 14.408 3.595 27.567 11.693 43.938l16.32 32.84c6.186 12.546 7.766 16.235 7.766 29.519 0 5.064-.14 8.807-.479 11.704h26.305zM541 644h22v-50h-22v-16h-27v118h27zm166 38.451V578h-26v107.403c0 3.989.033 7.48.1 10.597h27.096C707.1 691.312 707 685.584 707 682.451zM572 578h26v118h-26zm-377 66h23v-50h-23v-16h-26v118h26zm552 36.976V578h-26v104.451c0 3.298-.063 8.938-1.096 13.549h26.939c.123-4.744.157-9.737.157-15.024zm-313-7.749V655h-26v31.51c0 3.781-.16 6.914-.485 9.49h26.255c.226-7.225.23-14.819.23-22.773zM1140 578h25v118h-25zm62 0h26v118h-26zM855 689.831V578h-26v102.606c0 6.209.013 11.179.063 15.394h26.065c-.115-2.234-.128-4.386-.128-6.169zM964.903 696c.161-4.434.228-8.865.228-13.18 0-33.209-3.816-46.123-8.027-57.193-2.106-5.166-4.343-10.331-6.58-15.128l-12.766-26.937c-.96-2.04-1.865-3.872-2.711-5.563h-31.751c.886 14.408 3.595 27.567 11.693 43.938l16.319 32.84c6.186 12.546 7.766 16.235 7.766 29.519 0 5.064-.141 8.807-.479 11.704h26.308zM1108 644h23v-50h-23v-16h-26v118h26zm-238.12 52H895v-81h-33v46h8v29.938c0 1.83-.04 3.512-.12 5.062zm151.083-118h-18.181l-4.877 97.863L994.144 578h-22.413l5.375 118h37.375zm51.637 0h-22.308l-3.692 97.863-5.016-97.863h-18.319l6.401 118h37.678zM870 578h25v3h-25zm56 107.034V668h-25v9.654c0 6.196.004 12.339.161 18.346h25.538c-.48-3.176-.699-6.912-.699-10.966zm-602 0V668h-26v9.654c0 6.196.01 12.339.175 18.346h26.399c-.41-3.176-.574-6.912-.574-10.966zM408 578h26v9h-26z"
          id="Mitte_1_"
        />
        <path
          class="st0"
          d="M1140 491h25v85h-25zm-813.978 72.638c-.79-3.321-1.053-5.904-1.053-9.963 0-4.797.526-16.974 5.791-16.974 2.632 0 4.962 3.321 5.752 10.7.395 2.952.487 3.321.487 8.487V573h24v-12.314c0-16.974-.314-26.567-1.894-36.53-1.447-9.225-3.907-15.866-4.829-18.08-8.291-19.926-20.642-19.557-23.274-19.557-10.66 0-23.68 6.273-28.813 37.268-1.316 7.749-2.232 17.712-2.232 36.161 0 5.66.051 10.946.306 16.053h30.86c-2.469-4.912-4.285-8.551-5.101-12.363zM1228 576v-35h20v-50h-66v50h20v35zm-408-85h-21.621l.072 85H820zm-40.046 0H756v85h34.06zm148.986 72.638c-.79-3.321-1.053-5.904-1.053-9.963 0-4.797.526-16.974 5.79-16.974 2.633 0 5.004 3.321 5.793 10.7.396 2.952.529 3.321.529 8.487V573h24v-12.314c0-16.974-.355-26.567-1.934-36.53-1.449-9.225-3.929-15.866-4.851-18.08-8.291-19.926-20.652-19.557-23.284-19.557-10.66 0-23.685 6.273-28.817 37.268-1.315 7.749-2.235 17.712-2.235 36.161 0 5.66.051 10.946.306 16.053h30.858c-2.47-4.912-4.285-8.551-5.102-12.363zM1108 541h25v-50h-51v85h26zm-117.201-50h-23.031l3.872 85h22.426zM721 491h26v85h-26zm355.475 0h-22.9l-3.207 85h22.32zM572 491h26v85h-26zm-131 0h26v85h-26zm100 50h24v-50h-51v85h27zm-62-50h26v85h-26zm153.021 0H608v85h34.127zM672 491h-21.554l.072 85H672zm9 0h26v85h-26zm356.124 0h-30.006l-4.236 85h18.19l1.049-19.088 1.035 19.088h18.324zm-606.048 30.203c-3.553-18.08-13.241-35.054-29.823-35.054-6.58 0-14.78 2.583-20.834 11.438-10.265 14.76-10.974 38.744-11.369 51.29-.263 6.272-.05 12.545-.05 18.818V576h26v-20.111c0-12.177 2.157-18.081 6.763-18.081 4.475 0 6.237 6.643 6.237 18.081V576h26v-13.839c0-14.39-.292-27.674-2.924-40.958zm462.139 4.06c-.526-3.321-2.05-11.808-4.945-18.818-4.737-11.808-12.37-19.926-26.058-19.926-9.081 0-19.041 2.952-26.147 20.295-6.844 16.604-7.064 37.268-7.064 60.883V576h26v-19.373c0-8.856.591-18.081 7.171-18.081 7.106 0 7.829 8.487 7.829 18.818V576h25v-16.422c-.001-17.711-.471-25.829-1.786-34.315zM265.99 576h25.093c.387-6.294.457-12.896.457-19.742 0-15.867-.527-32.103-4.344-44.647-5.527-18.081-16.319-19.161-17.767-19.53-4.738-1.107-9.477-1.08-14.346-1.08H227v85h26v-33h7.084c4.343 0 5.916 4.033 5.916 15.841V573.6c0 .835-.004 1.629-.01 2.4zM220 491h-51v85h26v-35h25z"
          id="Top"
        />
      </g>
    </StyledSVG>
  );
};

export default RadicalSVGAnimator;
